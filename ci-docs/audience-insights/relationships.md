---
title: קשרים בין ישויות ונתיבי ישויות
description: צור ונהל קשרים בין ישויות ממקורות נתונים מרובים.
ms.date: 09/27/2021
ms.reviewer: mhart
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: conceptual
author: CadeSanthaMSFT
ms.author: cadesantha
manager: shellyha
ms.openlocfilehash: c639cfca30cf1b57ada7d728311210b7210a37ac
ms.sourcegitcommit: f72d5b86dfdc7282c6c1918b1ab3962d7a1c9852
ms.translationtype: HT
ms.contentlocale: he-IL
ms.lasthandoff: 09/27/2021
ms.locfileid: "7557353"
---
# <a name="relationships-between-entities"></a>קשרים בין ישויות

קשרים מחברים בין ישויות ומגדירים גרף של הנתונים שלך כאשר ישויות משתפות מזהה משותף, מפתח זר. ניתן להפנות מפתח זר זה מישות אחת לאחרת. ישויות מחוברות מאפשרות להפעיל את ההגדרה של פלחים ומדידות בהתבסס על מקורות נתונים מרובים.

ישנם שלושה סוגים של קשרים: 
- קשרי מערכת שאינם ניתנים לעריכה, נוצרים על-ידי המערכת כחלק מתהליך איחוד הנתונים
- קשרים שהתקבלו בירושה ואינם ניתנים לעריכה, שנוצרים באופן אוטומטי מקליטת מקורות נתונים 
- קשרים מותאמים אישית הניתנים לעריכה, נוצרים ומוגדרים על-ידי משתמשים

## <a name="non-editable-system-relationships"></a>קשרי מערכת שאינם ניתנים לעריכה

במהלך איחוד הנתונים, קשרי מערכת נוצרים באופן אוטומטי בהתבסס על התאמה חכמה. קשרים אלה עוזרים לקשר בין רשומות פרופיל הלקוח לבין רשומות תואמות. הדיאגרמה הבאה ממחישה את היצירה של שלושת הקשרים מבוססי המערכת. ישות הלקוחות מותאמת לישויות אחרות כדי יצור את ישות *הלקוח* המאוחדת.

:::image type="content" source="media/relationships-entities-merge.png" alt-text="דיאגרמה עם נתיבי קשרים עבור ישות הלקוחות עם שלושה קשרים מסוג 1-n.":::

- **קשר מסוג *CustomerToContact*** נוצר בין הישות *לקוח* לישות *איש קשר*. הישות *לקוח* מקבלת את שדה המפתח **Contact_contactId** כדי לקשר אותו לשדה מפתח הישות **contactId** של הישות *איש קשר*.
- **קשר מסוג *CustomerToAccount*** נוצר בין הישות *לקוח* לישות *תיק לקוח*. הישות *לקוח* מקבלת את שדה המפתח **Account_accountId** כדי לקשר אל שדה המפתח **accountId** של הישות *תיק הלקוח*.
- **קשר מסוג *CustomerToWebAccount*** נוצר בין הישות *לקוח* לישות *WebAccount*. הישות *לקוח* מקבלת את שדה המפתח **WebAccount_webaccountId** כדי לקשר את שדה המפתח **webaccountId** של הישות *WebAccount*.

## <a name="non-editable-inherited-relationships"></a>קשרים המתקבלים בירושה שאינם ניתנים לעריכה

בזמן תהליך קליטת הנתונים, המערכת בודקת את הקשרים הקיימים במקורות הנתונים. אם לא קיימים קשרים, המערכת יוצרת אותם באופן אוטומטי. קשרים אלה נמצאים גם בשימוש בתהליכים במורד הזרם.

## <a name="create-a-custom-relationship"></a>יצירת קשר מותאם אישית

קשר מורכב מ *ישות מקור* שמכילה את המפתח הזר ו *ישות יעד* שאליה מצביע המפתח הזר של ישות המקור. 

1. ב- Audience Insights, עבור אל **נתונים** > **קשרים**.

2. בחר **קשר חדש**.

3. בחלונית **קשר חדש**, ספק את הפרטים הבאים:

   :::image type="content" source="media/relationship-add.png" alt-text="חלונית צדדית של קשר חדש עם שדות קלט ריקים.":::

   - **שם הקשר**: שם המשקף את מטרת הקשר. דוגמה: CustomerToSupportCase.
   - **תיאור**: תיאור של הקשר.
   - **ישות מקור**: הישות המשמשת כמקור בקשר. דוגמה: SupportCase.
   - **ישות יעד**: הישות המשמשת כיעד בקשר. דוגמא: לקוח.
   - **עוצמת המקור**: ציין את העוצמה של ישות המקור. עוצמה מתארת את מספר הרכיבים האפשריים בקבוצה. היא תמיד קשורה לעוצמת היעד. באפשרותך לבחור בין **אחד** ל **רבים**. רק קשרים מסוג רבים-לאחד ואחד-אחד נתמכים.  
     - רבים-לאחד: רשומות מקור מרובות יכולות להיות קשורות לרשומת יעד אחת. דוגמה: מקרי תמיכה מרובים מלקוח יחיד.
     - אחד-לאחד: רשומת מקור יחידה קשורה לרשומת יעד אחת. דוגמה: מזהה נאמנות אחד עבור לקוח יחיד.

     > [!NOTE]
     > ניתן ליצור קשרים מסוג רבים-לרבים באמצעות שני קשרים מסוג רבים-לאחד וישות מקשרת, המחברת בין ישות המקור לישות היעד.

   - **מספר מונה של היעד** : בחר את הקרדינליות, המספר המונה של רשומות ישויות היעד. 
   - **שדה מפתח מקור** : שדה המפתח הזר בישות המקור. דוגמה: SupportCase יכול להשתמש ב- CaseID כשדה מפתח זר.
   - **שדה מפתח יעד**: שדה המפתח של ישות היעד. לדוגמה, לקוח יכול להשתמש בשדה המפתח **CustomerID**.

4. בחר **שמור** כדי ליצור את הקשר המותאם אישית.

## <a name="view-relationships"></a>הצגת קשרים

הדף 'קשרים' מפרט את כל הקשרים שנוצרו. כל שורה מייצגת קשר, וכוללת גם פרטים על ישות המקור, ישות היעד והעוצמה. 

:::image type="content" source="media/relationships-list.png" alt-text="רשימת הקשרים והאפשרויות בסרגל הפעולות של הדף 'קשרים'.":::

דף זה מציע קבוצה של אפשרויות עבור קשרים קיימים וחדשים: 
- **קשר חדש:** [יצירת קשר מותאם אישית](#create-a-custom-relationship).
- **רכיב המחשה**: [סקור את רכיב ההמחשה של הקשר](#explore-the-relationship-visualizer) כדי לראות דיאגרמת רשת של הקשרים הקיימים והעוצמה שלהם.
- **סנן לפי** : בחר את סוג הקשרים שיוצגו ברשימה.
- **חפש קשרים**: השתמש בחיפוש מבוסס טקסט במאפייני הקשרים.

### <a name="explore-the-relationship-visualizer"></a>סקירת רכיב ההמחשה של קשרים

רכיב ההמחשה של הקשר מציג דיאגרמת רשת של הקשרים הקיימים בין ישויות מחוברות ואת העוצמה שלהם. זה גם מדמה את נתיב הקשר.

כדי להתאים אישית את התצוגה, באפשרותך לשנות את מיקום התיבות על-ידי גרירתן על בד הציור.

:::image type="content" source="media/relationship-visualizer.png" alt-text="צילום מסך של דיאגרמת הרשת של רכיב ההמחשה של הקשר עם חיבורים בין ישויות קשורות.":::

האפשרויות הזמינות: 
- **יצא כתמונה**: שמור את התצוגה הנוכחית כקובץ תמונה.
- **שנה לפריסה אופקית/אנכית**: שנה את היישור של הישויות והקשרים.
- **עריכה**: עדכן מאפיינים של קשרים מותאמים אישית בחלונית העריכה ושמור שינויים.

## <a name="relationship-paths"></a>נתיבי קשר גומלין

נתיב קשר גומלין מתאר את הישויות המחוברות לקשרי גומלין בין ישות מקור לישות יעד. הוא משמש בעת יצירת מקטע או מדד הכולל ישויות אחרות מאשר ישות הפרופיל המאוחד וישנן מספר אפשרויות להגיע לישות הפרופיל המאוחד. 

נתיב קשר גומלין מספק מידע למערכת לגבי קשרי הגומלין שדרכם יש לגשת לישות הפרופיל המאוחדת. נתיבי קשר שונים יכולים להניב תוצאות שונות.

למשל הישות *eCommerce_eCommercePurchases* מכילה את הקשרים הבאים לפרופיל המאוחד *לקוח* ישות:

- eCommerce_eCommercePurchases > Customer
- eCommerce_eCommercePurchases > eCommerce_eCommerceContacts > POS_posPurchases > Customer
- eCommerce_eCommercePurchases > eCommerce_eCommerceContacts > POS_posPurchases > loyaltyScheme_loyCustomers > Customer 

נתיב קשר גומלין קובע באילו ישויות ניתן להשתמש בעת יצירת כללים עבור מדידות או מקטעים. סביר להניח שבחירת האפשרות עם נתיב הקשר הארוך ביותר תניב פחות תוצאות מכיוון שהרשומות התואמות צריכות להיות חלק מכל הישויות. בדוגמה זו, על לקוח לרכוש סחורות באמצעות מסחר אלקטרוני (eCommerce_eCommercePurchases), בנקודת מכירה (POS_posPurchases) ולהשתתף בתוכנית הנאמנות שלנו (loyaltyScheme_loyCustomers). בעת בחירת האפשרות הראשונה, סביר להניח שתקבל יותר תוצאות מכיוון שלקוחות צריכים להתקיים רק בישות אחת נוספת.

### <a name="direct-relationship"></a>קשר גומלין ישיר

קשר גומלין מסווג כ **קשר גומלין ישיר** כאשר ישות מקור מתייחסת לישות יעד עם קשר גומלין אחד בלבד.

לדוגמה, אם ישות פעילות הנקראת *eCommerce_eCommercePurchases* מתחברת לישות יעד *eCommerce_eCommerceContacts* דרך *ContactId* בלבד, זהו קשר גומלין ישיר.

:::image type="content" source="media/direct_Relationship.png" alt-text="ישות המקור המתחברת ישירות לישות יעד.":::

#### <a name="multi-path-relationship"></a>קשר גומלין של נתיבים מרובים

**קשר גומלין של נתיבים מרובים** הוא סוג מיוחד של קשר גומלין ישיר המחבר ישות מקור ליותר מישות יעד אחת.

לדוגמה, אם ישות פעילות הנקראת *eCommerce_eCommercePurchases* מתייחסת לשתי ישויות יעד, הן *eCommerce_eCommerceContacts* והן *loyaltyScheme_loyCustomers*, זהו קשר גומלין מרובה נתיבים.

:::image type="content" source="media/multi-path_relationship.png" alt-text="ישות מקור מתחברת ישירות ליותר מישות יעד אחת דרך קשר גומלין מרובה דילוגים.":::

### <a name="indirect-relationship"></a>קשר גומלין עקיף

קשר גומלין מסווג כ **קשר גומלין עקיף** כאשר ישות מקור מתייחסת לישות נוספת אחת או יותר לפני שהיא מתייחסת לישות יעד.

#### <a name="multi-hop-relationship"></a>קשר גומלין של דילוגים מרובים

*קשר גומלין מרובה דילוגים* הוא *קשר גומלין עקיף* המאפשר לך לחבר ישות מקור לישות יעד דרך ישות מתווכת אחת או יותר.

לדוגמה, אם ישות פעילות הנקראת *eCommerce_eCommercePurchasesWest* מתחברת לישות מתווכת הנקראת *eCommerce_eCommercePurchasesEast* ולאחר מכן מתחברת לישות יעד הנקראת *eCommerce_eCommerceContacts*, זהו קשר גומלין מרובה דילוגים.

:::image type="content" source="media/multi-hop_relationship.png" alt-text="ישות מקור מתחברת ישירות לישות יעד עם ישות מתווכת.":::

### <a name="multi-hop-multi-path-relationship"></a>קשר גומלין מרובה-דילוגים, מרובה-נתיבים

ניתן להשתמש בקשרי גומלין מרובי דילוגים ומרובי נתינים ביחד כדי ליצור **קשרי גומלין מרובי דילוגים ומרובי נתיבים**. סוג מיוחד זה משלב את הפונקציות של **קשרי גומלין מרובי דילוגים** ו **קשרי גומלין מרובי נתיבים**. הוא מאפשר לך להתחבר ליותר מישות יעד אחת בעת השימוש בישויות מתווכות.

לדוגמה, אם ישות פעילות הנקראת *eCommerce_eCommercePurchasesWest* מתחברת לישות מתווכת הנקראת *eCommerce_eCommercePurchasesEast* ולאחר מכן מתחברת לשתי ישויות יעד, הן *eCommerce_eCommerceContacts* והן *loyaltyScheme_loyCustomers*, זהו קשר גומלין מרובה-דילוגים ומרובה-נתיבים.

:::image type="content" source="media/multi-hop_multi-path_relationship.png" alt-text="ישות מקור מתחברת ישירות לישות יעד אחת ומתחברת לישות יעד אחרת באמצעות ישות מתווכת.":::

## <a name="manage-existing-relationships"></a>ניהול קשרים קיימים 

בדף 'קשרים', כל קשר מיוצג על-ידי שורה. 

בחר קשר ובחר אחת מהאפשרויות הבאות: 
 
- **עריכה**: עדכן מאפיינים של קשרים מותאמים אישית בחלונית העריכה ושמור שינויים.
- **מחק**: מחק קשרים מותאם אישית.
- **תצוגה**: הצג קשרים שנוצרו על-ידי המערכת והתקבלו בירושה. 

## <a name="next-step"></a>השלב הבא

מערכת ו-קשרים מותאמים אישית משמשים בכדי [ליצור קטעים](segments.md) וגם [אמצעים](measures.md) בהתבסס על מספר מקורות נתונים שכבר אינם מושתקים.

[!INCLUDE[footer-include](../includes/footer-banner.md)]
