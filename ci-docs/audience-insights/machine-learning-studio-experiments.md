---
title: ניסויי Machine Learning Studio (קלאסי)
description: השתמש במודלים של Machine Learning Studio (קלאסי) ב- Dynamics 365 Customer Insights.
ms.date: 12/03/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: conceptual
author: m-hartmann
ms.author: mhart
ms.reviewer: ameetj
manager: shellyha
ms.openlocfilehash: 556b6810db0ed2733a3f086291757bd85b77e371
ms.sourcegitcommit: a9b2cf598f256d07a48bba8617347ee90024a1dd
ms.translationtype: HT
ms.contentlocale: he-IL
ms.lasthandoff: 12/03/2020
ms.locfileid: "4669019"
---
# <a name="use-models-based-on-azure-machine-learning-studio-classic"></a>שימוש במודלים המבוססים על Azure Machine Learning Studio (קלאסי)

הנתונים המאוחדים ב- Dynamics 365 Customer Insights הם מקור לבניית מודלי למידת מכונה שיכולים ליצור תובנות עסקיות נוספות. Customer Insights משתלב עם Machine Learning Studio (קלאסי) כדי להשתמש במודלים המותאמים אישית שלך. כדי לראות כיצד מודלים שפותחו ב- Azure Machine Learning משולבים עם Customer Insights, ראה [ניסויי Azure Machine Learning](azure-machine-learning-experiments.md).

## <a name="prerequisites"></a>דרישות מוקדמות

- גישה ל- Customer Insights
- מנוי Azure Enterprise
- [פרופילי לקוחות מאוחדים](data-unification.md)
- הגדרת [ייצוא ישויות לאחסון Azure Blob](export-azure-blob-storage.md)

## <a name="set-up-machine-learning-studio-classic"></a>הגדרת Machine Learning Studio Classic

בשלב ראשון, עלינו ליצור סביבת עבודה עבור Machine Learning Studio (קלאסי) ולפתוח אותו.

1. עבור אל[https://www.portal.azure.com](https://www.portal.azure.com/) והיכנס.

1. בחר **יצירת משאב**.

1. חפש **סביבת העבודה לסטודיו למידת מכונה** ובחר **צור**.

1. הזן את הפרטים הנדרשים כדי [ליצור את סביבת העבודה](https://docs.microsoft.com/azure/machine-learning/studio/create-workspace). בחר את **שכבת תמחור תוכנית של שירות אינטרנט** המבוססת על כמות הנתונים שבכוונך לייבא. לקבלת הביצועים הטובים ביותר, בחר את **המיקום** הכי קרוב מבחינתך.

1. לאחר יצירת המשאב יופיע לוח המחוונים של סביבת העבודה של סטודיו ללמידת מכונה. בחר **הפעל את סטודיו ללמידת מכונה**.

   ![ממשק משתמש של סטודיו למידת מכונה של Azure](media/azure-machine-learning-studio.png)

## <a name="work-with-azure-machine-learning-studio"></a>עבוד עם הסטודיו ללמידת מכונה של Azure

כעת תוכל ליצור ניסוי חדש או לייבא תבנית ניסוי קיימת מגלריית הדוגמאות. קיימים ניסויים לדוגמה עבור שלושה תרחישים סטנדרטיים:

- [חיזוי נטישה](#churn-analysis)

- [ערך אורך חיים של לקוח](#customer-lifetime-value-prediction)

- [המלצה על מוצר או על הפעולה הבאה הטובה ביותר](#productrecommendation-or-next-best-action)

1. אם אתה יוצר ניסוי חדש או משתמש בתבנית ניסוי מהגלריה, עליך להגדיר את הAzure **ייבא נתונים**. השתמש בחוויה המודרכת או ספק ישירות פרטים כדי לגשת ל- Azure Blob Storage שמכיל את הנתונים שלך.  

   ![ניסוי של הסטודיו ללמידת מכונה של Azure](media/azure-machine-learning-studio-experiment.png)

1. כעת תוכל לבנות קו צינור לעיבוד בהתאמה אישית כדי לנקות ולעבד את הנתונים מראש, לחלץ תכונות ולאמן מודל מתאים.

1. בדוק ובצע אופטימיזציה של ביצועי המודל.

1. כאשר תהיה מרוצה מאיכות המודל, בחר **הגדר שירות אינטרנט** > **שירות אינטרנט חזוי**. אפשרות זו מייבאת את המודל שעבר אימון ואת קו הצינור מניסוי האימון לשירות חיזוי. שירות החיזוי יכול לקחת קבוצה נוספת של נתוני קלט בעזרת הסכימה המשמשת בניסוי האימונים כדי לבצע תחזיות.

   ![הגדר שירות אינטרנט חזוי](media/predictive-webservice-control.png)

1. לאחר שהניסוי בשירות האינטרנט החזוי יצליח, תוכל לפרוס אותו לתזמון אוטומטי. כדי ששירות האינטרנט יעבוד עם Customer Insights, בחר **פרוס שירות אינטרנט** > **פרוס תצוגה מקדימה של שירות אינטרנט [חדש]**. [קבל מידע נוסף על יכולות שירות האינטרנט](https://docs.microsoft.com/azure/machine-learning/studio/deploy-a-machine-learning-web-service).

   ![פרוס שירות אינטרנט חזוי](media/predictive-webservice-deploy.png)

## <a name="sample-models-from-the-gallery"></a>מודלים לדוגמה מהגלריה

במאמר זה נשתמש בתרחיש פיקטיבי של מלון עבור המודלים. מלון קונטוסו אוסף את הנתונים הבאים:

- נתוני CRM המורכבים מפעילות שהות במלון. ערכת הנתונים כוללת מידע על מועדי השהות עבור כל לקוח רשום. היא מכילה גם מידע על ההזמנה, סוגי החדרים, פרטי ההוצאות וכן הלאה. הנתונים מייצגים ארבע שנים, מינואר 2014 ועד ינואר 2018.
- פרופילי לקוחות של אורחי המלון. פרופילים אלה מכילים מידע על כל לקוח, כולל שם, תאריך לידה, כתובת דואר, מין ומספר טלפון.
- שימוש בשירותים שמציע המלון, כגון ספא, כביסה, WiFi או שליח. מידע זה נרשם עבור כל לקוח רשום. בדרך כלל, השימוש בשירותים מקושר לשהות. במקרים מסוימים, השירותים יכולים לשמש את הלקוחות מבלי להישאר במלון.

## <a name="churn-analysis"></a>ניתוח שיעורי נטישה

ניתוח שיעורי נטישה חל על תחומי עסקים שונים. בדוגמה זו, נבחן את נטישת השירות, במיוחד בהקשר של שירותי מלונות כמתואר לעיל. זוהי דוגמה לקו צינור של מודל מקצה לקצה שיכול לשמש כנקודת התחלה עבור כל סוג אחר של דגם הנטישה.

### <a name="definition-of-churn"></a>הגדרה של נטישה

הגדרת הנטישה יכולה להיות שונה בהתבסס על התרחיש. בדוגמה זו, אורח שלא ביקר במלון בשנה האחרונה צריך להיות מסומן כאורח שנטש.  

ניתן לייבא את תבנית הניסוי מהגלריה. ראשית, ודא שאתה מייבא את הנתונים עבור **פעילות השהות במלון**, **נתוני לקוחות**, ו **נתוני שימוש בשירות** מאחסון Azure Blob.

   ![ייבא נתונים עבור מודל הנטישה](media/import-data-azure-blob-storage.png)

### <a name="featurization"></a>יצירת תכונות

בהתבסס על הגדרת הנטישה, אנו מזהים תחילה את התכונות הגולמיות שישפיעו על התווית. לאחר מכן אנו מעבדים תכונות גולמיות אלה לתכונות מספריות שניתן להשתמש בהן במודלים של למידת מכונה. שילוב נתונים מתרחש ב- Customer Insights כך שאנחנו יכולים לצרף טבלאות אלה באמצעות *מזהה הלקוח*.

   ![צירוף נתונים מיובאים](media/join-imported-data.png)

התכונות לבניית המודל לניתוח נטישה יכולות להיות מעט מתוחכמות. הנתונים הם פונקציה של זמן עם פעילות מלון חדשה שנרשמת על בסיס יומי. במהלך יצירת התכונות, אנו רוצים ליצור תכונות סטטיות מהנתונים הדינמיים. במקרה זה, אנו מייצרים מספר תכונות מפעילות במלון עם חלון של שנה. אנו גם מרחיבים את התכונות הקטגוריות כמו סוג החדר או סוג ההזמנה לתכונות נפרדות באמצעות קידוד.  

רשימת התכונות הסופית:

| **מספר**  | **Original_Column**          | **תכונות נגזרות**                                                                                                                      |
|-------------|------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| 1           | סוג חדר                    | RoomTypeLargeCount, RoomTypeSmallCount                                                                                                    |
| 2           | סוג הזמנה                 | BookingTypeOnlineCount, BookingTypePhoneCallCount                                                                                         |
| 3           | קטגוריית נסיעות              | TravelCategoryBusinessCount, TravelCategoryLeisureCount                                                                                   |
| 4           | סכום שהוצא בדולר                | TotalDollarSpent                                                                                                                          |
| 5           | תאריכי צ'ק-אין וצ'ק-אאוט  | StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016. StayCount2015, StayCount2014                |
| 6           | שימוש בשירות                | UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage  |

### <a name="model-selection"></a>בחירה במודל

כעת עלינו לבחור באלגוריתם האופטימלי לשימוש. במקרה זה, רוב התכונות מבוססות על תכונות קטגוריות. בדרך כלל, מודלים מבוססי עץ החלטה עובדים היטב. אם יש רק מאפיינים מספריים, רשתות נוירונים יכולות להיות בחירה טובה יותר. מכונת וקטור תמיכה (SVM) גם היא מועמדת טובה במצבים כאלה; עם זאת, צריך לא מעט כוונון כדי להפיק את הביצועים הטובים ביותר. אנחנו בוחרים **עץ החלטות משופר עם שתי מחלקות** כמודל הראשון ואחריו **SVM עם שתי מחלקות** כמודל השני. Azure Machine Learning Studio מאפשר לך לבצע בדיקות A/B, כך שכדאי להתחיל עם שני מודלים ולא עם אחד.

התמונה הבאה מציגה את קו הצינור לאימון והערכה של המודל מהסטודיו ללמידת מכונה של Azure:

![מודל נטישה בסטודיו למידת מכונה של Azure](media/azure-machine-learning-model.png)

אנו מיישמים גם טכניקה הנקראת **חשיבות תכונת הפרמוטציה**, היבט חשוב באופטימיזציה של המודל. לדגמים המוכללים אין מעט תובנות לגבי ההשפעה של תכונה ספציפית כלשהי על החיזוי הסופי. מחשבון חשיבות התכונות משתמש באלגוריתם מותאם אישית כדי לחשב את ההשפעה של תכונות בודדות על התוצאה עבור מודל ספציפי. חשיבות התכונות מנורמלת בין ‎ +1 לבין ‎-1. השפעה שלילית פירושה שלתכונה המקבילה יש השפעה שלילית על התוצאה ויש להסיר אותה מהמודל. השפעה חיובית מצביעה על כך שהתכונה תורמת רבות לחיזוי. ערכים אלה אינם מקדמי מתאם מכיוון שהם מדדים שונים. למידע נוסף, ראה [חשיבות תכונת הפרמוטציה](https://docs.microsoft.com/azure/machine-learning/studio-module-reference/permutation-feature-importance).

כל [ניסוי הנטישה זמין בגלריית ה- AI של Azure](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).

## <a name="customer-lifetime-value-prediction"></a>חיזוי ערך אורך חיים של לקוח

חישוב של ערך חיי הלקוח (CLTV) הוא אחד ממדדי המפתח שבהם עסק יכול להשתמש כדי להעריך ולפלח את לקוחותיו. לעסקי מלונות, חשוב מאד להכיר את הלקוחות שלהם. לדוגמה, הבנת גורמים שיוצרים לקוחות טובים היא מידע מכריע. זה עוזר להנהלת המלון להעריך באילו תכונות הם צריכים להתמקד ולשפר כדי לשפר את שביעות רצונם של הלקוחות המשלמים סכומים גבוהים. החלטות אלה יכולות להשפיע ישירות על המכירות והרווחים.  

### <a name="definition-of-cltv"></a>הגדרה של CLTV

בדוגמה זו אנו מגדירים את ה- CLTV של לקוח כסכום הכולל בדולרים שהלקוח צפוי להוציא במהלך 365 הימים הקרובים. נשתמש בנתונים של שלוש השנים האחרונות עבור כל הלקוחות כדי לחזות ערך זה.

### <a name="featurization"></a>יצירת תכונות

במקרה זה, יצירת התכונות תהיה דומה לתסריט הנטישה. עם זאת, התוויות והערכים החזויים שונים מהגדרתם לעיל.

### <a name="model-selection"></a>בחירה במודל

חיזוי ה- CLTV הוא בעיית רגרסיה, שכן הערך החזוי הוא משתנה רציף מוערך חיובי. בהתבסס על מאפייני התכונה, אנו בוחרים **רגרסיה משופרת של עץ החלטות** כאלגוריתם אחד ובאפשרות **רגרסיה של רשת נוירונים** כאלגוריתם נוסף לאימון המודל.

## <a name="product-recommendation-or-next-best-action"></a>המלצה על מוצר או על הפעולה הבאה הטובה ביותר

המלצה על מוצר בתרחיש של מלונות מתפרשת כהמלצה על שירותים שמציע המלון למען הלקוחות. המטרה היא לבחור את השירותים המתאימים ללקוחות כך שהשימוש בהם יהיה מירבי. זה דומה להמלצות על סרטים למשתמשים בשירותי הזרמת וידאו.

### <a name="definition-of-product-recommendation-or-next-best-action"></a>הגדרה של המלצה על מוצר או על הפעולה הבאה הטובה ביותר

אנו מגדירים את המטרה כמקסום הסכום בדולרים לשירות על ידי הצעת השירותים התואמים הטובים ביותר ללקוחות המלונות בהתאם לאינטרס שלהם.

### <a name="featurization"></a>יצירת תכונות

בדומה למודל הנטישה, אנו מצרפים את hotel ServiceCustomerID ל- CustomerID על מנת לבנות באופן עקבי המלצות לפי מזהה הלקוח.

![יצירת תכונות של מודל ההמלצות](media/azure-machine-learning-model-featurization.png)

הנתונים מקורם משלוש ישויות שונות והתכונות הנגזרות מהן. יצירת תכונות לבעיית ההמלצה שונה בהשוואה לתרחישים של מודל הנטישה או CLTV. מודל ההמלצה זקוק לנתוני קלט בצורה של שלוש קבוצות של תכונות.

### <a name="model-selection"></a>בחירה במודל

אנו חוזים מוצרים או שירותים על-ידי שימוש באלגוריתם הנקרא **אימון ממליץ בשיטת קופסת הגפרורים** כדי לאמן את מודל ההמלצות.

![האלגוריתם של 'המלצות על מוצרים'](media/azure-machine-learning-model-recommendation-algorithm.png)

שלוש יציאות הקלט עבור המודל **אימון ממליץ בשיטת קופסת הגפרורים** לוקחות את נתוני השימוש בשירותי האימון, את תיאור הלקוחות (לא חובה) ואת תיאור השירותים. יש שלוש דרכים שונות לניקוד המודל. אחת מיועדת להערכת מודל שבה מחושב ניקוד רווח מצטבר מוזל (NDCG) כדי לדרג את הפריטים המדורגים. בניסוי זה, ציון ה- NDCG הוא 0.97. שתי האפשרויות האחרות הן ניקוד המודל בכל קטלוג השירותים המומלץ, או ניקוד רק של פריטים שמשתמשים לא השתמשו בהם קודם.

בבחינה נוספת של התפלגות ההמלצות בקטלוג השירותים כולו, ניתן לראות כי הטלפון, ה- WiFi והשליח הם השירותים המובילים המומלצים. זה תואם את מה שמצאנו מההפצות של נתוני צריכת השירות:

![פלט של מודל ההמלצות](media/azure-machine-learning-model-output.png)

ניתן לגשת [לכל הניסוי של המלצות על מוצרים בגלריית ה- AI של Azure.](https://gallery.azure.ai/Experiment/Recommendation-4)

## <a name="integrate-custom-models"></a>שילוב מודלים מותאמים אישית

כדי להשתמש בתחזיות אלה ב- Customer Insights, עליך לבצע **ייצוא** של התחזיות יחד עם מזהי הלקוחות. [יצא אותן לאותו מיקום אחסון של Azure Blob](https://docs.microsoft.com/azure/storage/common/storage-import-export-data-from-blobs) שאליו אתה מייצא את נתוני המקור. ניתן לתזמן את שירות האינטרנט החזוי לפעול באופן קבוע ולעדכון הניקוד.

ניתן להשתמש בנתונים שנוצרו על-ידי המודל המותאם אישית להעשרת נתוני הלקוחות שלך. למידע נוסף ראה [דגמי למידת מכונה מותאמים אישית](custom-models.md).
