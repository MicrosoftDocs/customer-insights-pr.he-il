---
title: התאמת ישויות לאיחוד נתונים
description: התאם ישויות ליצירת פרופילי לקוח מאוחדים.
ms.date: 10/14/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: tutorial
author: m-hartmann
ms.author: mhart
ms.reviewer: adkuppa
manager: shellyha
ms.openlocfilehash: 05afd17b7f1b34f7f24a8fa8cb2dc32c1649d40f
ms.sourcegitcommit: 139548f8a2d0f24d54c4a6c404a743eeeb8ef8e0
ms.translationtype: HT
ms.contentlocale: he-IL
ms.lasthandoff: 02/15/2021
ms.locfileid: "5267479"
---
# <a name="match-entities"></a>התאמת ישויות

לאחר השלמת שלב המפה, אתה מוכן להתאים את היישויות שלך. שלב ההתאמה מציין כיצד לשלב את ערכות הנתונים שלך בערכת נתונים של פרופיל לקוח אחיד. שלב ההתאמה דורש לפחות [שתי ישויות ממופות](map-entities.md).

## <a name="specify-the-match-order"></a>ציין את סדר ההתאמה

עבור אל **נתחנים** > **אחד** > **התאם** ובחר **הגדר סדר** כדי להתחיל בשלב ההתאמה.

כל התאמה מאחדת שתי ישויות או יותר ליישות אחת, תוך הקפדה על כל רשומת לקוח ייחודית. בדוגמה הבאה, בחרנו שלוש ישויות: **ContactCSV: TestData** בתור הישות **הראשית**, **WebAccountCSV: TestData** בתור **ישות 2**, ו- **CallRecordSmall: TestData** בתור **ישות 3**. הדיאגרמה שמעל לבחירות מתארת כיצד יבוצע סדר ההתאמה.

> [!div class="mx-imgBorder"]
> ![עריכת סדר התאמת הנתונים](media/configure-data-match-order-edit-page.png "עריכת סדר התאמת הנתונים")
  
הישות **הראשית** מותאמת ל- **ישות 2**. ערכת הנתונים שנוצרת בעקבות מההתאמה הראשונה מתאימה **לישות 3**.
בדוגמה זו, בחרנו רק שתי התאמות, אך המערכת יכולה לתמוך ביותר.

> [!IMPORTANT]
> הישות שאתה בוחר בתור הישות **הראשית** שלך תשמש כבסיס לערכת הנתונים הראשית האחידה. ישויות נוספות שנבחרות במהלך שלב ההתאמה יתווספו לישות זו. יחד עם זאת, אין פירוש הדבר שהישות האחידה תכלול את *כל* הנתונים הכלולים בישות זו.
>
> קיימים שני שיקולים שיכולים לסייע לך לבחור את ההירארכיה של היישויות:
>
> - איזו ישות לדעתך היא בעלת המידע המלא והאמין ביותר לגבי הלקוחות שלך?
> - האם לישות שזיהית כרגע יש תכונות שמשותפות גם על-ידי ישויות אחרות (לדוגמה, שם, מספר טלפון או כתובת דואר אלקטרוני)? אם לא, בחר את הישות השנייה האמינה ביותר.

בחר באפשרות **בוצע** כדי לשמור את סדר ההתאמה.

## <a name="define-rules-for-your-first-match-pair"></a>הגדרת כללים עבור זוג ההתאמה הראשון שלך

לאחר ציון סדר ההתאמה, תראה את ההתאמות המוגדרות בדף **התאמה**. האריחים בחלק העליון של המסך יהיו ריקים עד שתפעיל את סדר ההתאמה שלך.

> [!div class="mx-imgBorder"]
> ![הגדרת כללים](media/configure-data-match-need-rules.png "הגדרת כללים")

האזהרה **דרושים כללים** מרמזת על כך שלא מוגדר כלל התאמה עבור זוג התאמה. כללי התאמה מציינים את הלוגיקה שלפיה יותאמו זוג ישויות מסוים.

1. כדי להגדיר את הכלל הראשון, פתח את החלונית **הגדרת כלל** כל ידי בחירה בשורת ההתאמה הרלוונטית בטבלת ההתאמות (1) ובחירה באפשרות **צור כלל חדש** (2).

   > [!div class="mx-imgBorder"]
   > ![צור כלל חדש](media/configure-data-match-new-rule2.png "צור כלל חדש")

2. בחלונית **עריכת כלל**, הגדר את התנאים עבור כלל זה. כל תנאי מיוצג על-ידי שתי שורות הכוללות בחירות הכרחיות.

   > [!div class="mx-imgBorder"]
   > ![חלונית כלל חדש](media/configure-data-match-new-rule-condition.png "חלונית כלל חדש")

   ישות/שדה (ראשון) - תכונה שתשמש להתאמה מהישות הראשונה של זוג ההתאמה. דוגמאות יכולות לכלול מספר טלפון או כתובת דואר. בחר תכונה שעשויה להיות ייחודית ללקוח.

   > [!TIP]
   > הימנע מהתאמה על בסיס תכונות מסוג פעילות. במילים אחרות, אם תכונה נראית כפעילות, ייתכן שתהיה התאמה לקריטריונים באיכות נמוכה יותר.  

   ישות/שדה (שני) - תכונה שתשמש להתאמה מהישות השנייה של זוג ההתאמה.

   נרמול - **שיטת נרמול**: אפשרויות נרמול שונות לתכונות שנבחרו. לדוגמה, הסרת פיסוק או הסרת רווחים

   עבור נרמול שמות ארגוניים (תצוגה מקדימה), באפשרותך גם לבחור **סוג (טלפון, שם, ארגון)**

   > [!div class="mx-imgBorder"]
   > ![נרמול-B2B](media/match-normalization-b2b.png "נרמול-B2B")

   רמת דיוק - רמת הדיוק שתהיה בשימוש עבור מצב זה. הגדרת רמת דיוק עבור תנאי התאמה יכולה להיות בעלת שני סוגים: **בסיסיים** או **מותאמים אישית**.  
   - בסיסי: מספק ארבע אפשרויות לבחירה: נמוך, בינוני, גבוה ומדויק. בחר **מדויק** כדי להתאים רק רשומות שתואמות ב- 100 אחוז. בחר אחת מהרמות האחרות כדי להתאים רשומות שאינן זהות ב- 100 אחוז.
   - מותאם אישית: השתמש במחוון כדי להגדיר את האחוז המותאם אישית שהרשומות צריכות להתאים או הזן ערך בשדה **מותאם אישית**. המערכת תבצע התאמה רק לרשומות שעוברות את הסף הזה כזוגות תואמים. הערכים במחוון הם בין 0 ל-1. כלומר, 0.64 מייצג 64 אחוזים.

3. בחר **בוצע** כדי לשמור את הכלל.

### <a name="add-multiple-conditions"></a>הוספת תנאים מרובים

כדי להתאים את הישויות רק אם מתקיימים תנאים מרובים, הוסף תנאים נוספים המקושרים באמצעות האופרטור AND.

1. בחלונית **ערוך כלל**, בחר באפשרות **הוסף תנאי**. באפשרותך גם למחוק תנאים על-ידי בחירה בלחצן הסר לצד תנאי קיים.

2. בחר **בוצע** כדי לשמור את הכלל.

## <a name="add-multiple-rules"></a>הוספת כללים מרובים

כל תנאי חל על זוג תכונות יחיד, בעוד שכללים מייצגים ערכות של תנאים. כדי שהישויות יותאמו באמצעות ערכות תכונות שונות, אפשר להוסיף כללים נוספים.

1. ב- audience insights, עבור אל **נתונים** > **אחד** > **התאם**.

2. בחר את הישות שברצונך לעדכן ובחר **הוסף כללים**.

3. בצע את ההליך כמתואר ב- [הגדרת כללים עבור זוג ההתאמה הראשון](#define-rules-for-your-first-match-pair).

> [!NOTE]
> יש חשיבות לסדר הכללים. אלגוריתם ההתאמה מנסה להתאים לפי הכלל הראשון וממשיך לכלל השני רק אם לא זוהו התאמות לפי הכלל הראשון.

## <a name="define-deduplication-on-a-match-entity"></a>הגדרת ביטול כפילויות בישות מתאימה

לצד ציון כללי התאמה בין ישויות כמתואר בסעיפים לעיל, תוכל גם לציין כללי ביטול כפילויות. *ביטול כפילויות* הוא תהליך. הוא מזהה רשומות כפולות, ממזג אותן לרשומה אחת ומקשר את כל רשומות המקור לרשומה ממוזגת זו עם מזהים חלופיים לרשומה הממוזגת.

לאחר זיהוי רשומה שהכפילויות שלה בוטלו, רשומה זו תשמש בתהליך ההתאמה בין ישויות. ביטול כפילויות מיושם ברמת הישות וניתן להחיל אותו על כל ישות המשמשת בתהליך ההתאמה.

### <a name="add-deduplication-rules"></a>הוספת כללים לביטול כפילויות

1. ב- audience insights, עבור אל **נתונים** > **אחד** > **התאם**.

1. במקטע **כפילויות ממוזגות**, בחר **הגדר ישויות**.

1. במקטע **העדפות מיזוג**, בחר את הישויות שברצונך להחיל עליהן ביטול כפילויות.

1. ציין כיצד יש למזג את הרשומות הכפולות ובחר אחת מבין שלוש אפשרויות מיזוג:
   - *הכי הרבה אנשים מילאו*: מזהה את הרשומה עם הכי הרבה תכונות מלאות כרשומה המנצחת. זוהי אפשרות המיזוג של ברירת המחדל.
   - *החדשים ביותר*: מזהה את הרשומה המנצחת בהתבסס על העדכניות. דורש תאריך או שדה מספרי להגדרת העדכניות.
   - *הישנים ביותר*: מזהה את הרשומה המנצחת בהתבסס על העדכניות הנמוכה ביותר. דורש תאריך או שדה מספרי להגדרת העדכניות.
 
   > [!div class="mx-imgBorder"]
   > ![כללים לביטול כפילויות שלב 1](media/match-selfconflation.png "כללים לביטול כפילויות שלב 1")
 
1. כאשר הישויות נבחרות והעדפת המיזוג שלהן מוגדרת, בחר **צור כלל חדש** כדי להגדיר את כללי ביטול הכפילויות ברמת ישות.
   - האפשרות **בחר שדה** מפרטת את כל השדות הזמינים מאותה ישות שבהם ברצונך לבטל את הכפילויות של נתוני המקור.
   - ציין את הגדרות הנרמול והדיוק באופן דומה, כפי שצוין בהתאמה בין ישויות.
   - באפשרותך להגדיר תנאים נוספים על-ידי בחירת **הוסף תנאי**.
 
   > [!div class="mx-imgBorder"]
   > ![כללים לביטול כפילויות שלב 2](media/match-selfconflation-rules.png "כללים לביטול כפילויות שלב 2")

  באפשרותך ליצור כללים מרובים לביטול כפילויות עבור ישות. 

1. הפעלת תהליך ההתאמה מקבץ כעת את הרשומות בהתבסס על התנאים המוגדרים בכללי ביטול הכפילויות. לאחר קיבוץ הרשומות, מדיניות המיזוג מיושמת כדי לזהות את הרשומה המנצחת.

1. רשומה מנצחת זו עוברת לאחר מכן להתאמה חוצת-ישויות, ביחד עם הרשומות שאינן מנצחות (לדוגמה, מזהים חלופיים) כדי לשפר את איכות ההתאמה.

1. כל כללי ההתאמה המותאמים אישית מוגדרים עבור כללי ביטול כפילויות של עקיפת התאמה תמיד והתאמה אף פעם. אם כלל ביטול כפילויות מזהה רשומות מתאימות, וכלל התאמה מותאם אישית מוגדר כדי לא להתאים אף פעם לרשומות אלה, שתי הרשומות הללו לא יותאמו.

1. לאחר הפעלת תהליך ההתאמה, תראה את הנתונים הסטטיסטיים של ביטול הכפילויות.
   
> [!NOTE]
> ציון כללי ביטול כפילויות אינו הכרחי. אם לא מוגדרים כללים כאלה, מוחלים הכללים המוגדרים על-ידי המערכת. הם מכווצים את כל הרשומות שחולקות את אותו שילוב ערכים (התאמה מדויקת) ממפתח ראשי ואת השדות בכללי ההתאמה לרשומה אחת לפני העברת נתוני הישות להתאמה בין ישויות עבור ביצועים משופרים ושפיות של מערכת.

## <a name="run-your-match-order"></a>הפעל את סדר ההתאמה שלך

לאחר הגדרת כללי ההתאמה, כולל כללי התאמה בין ישויות וביטול כפילות, ניתן להפעיל את סדר ההתאמה. בדף **התאמה** בחר **הפעל** כדי להתחיל בתהליך. ייתכן שאלגוריתם ההתאמה ייקח זמן להשלמת הפעולה. אינך יכול לשנות מאפיינים בדף **התאמה** עד להשלמת תהליך ההתאמה. תמצא את ישות פרופיל הלקוח המאוחד שנוצרה בדף **ישויות**. יישות הלקוח המאוחדת נקראת **ConflationMatchPairs : CustomerInsights**.

כדי לבצע שינויים נוספים ולהפעיל מחדש את הצעד, באפשרותך לבטל התאמה מתבצעת. בחר את הטקסט **מרענן...** ובחר **בטל משימה** בתחתית החלונית הצדדית שמופיעה.

לאחר השלמת תהליך ההתאמה, הטקסט **מרענן...** ישתנה ל **בוצע בהצלחה** ותוכל להשתמש בכל הפונקציונליות של הדף שוב.

תהליך ההתאמה הראשון מביא ליצירת ישות אב מאוחדת. כל ריצות ההתאמה שלאחר מכן גורמות להרחבה של אותה ישות.

> [!TIP]
> קיימים [שישה סוגים של מצבים](system.md#status-types) עבור משימות/תהליכים. בנוסף, רוב התהליכים [תלויים בתהליכים אחרים במורד הזרם](system.md#refresh-policies). באפשרותך לבחור את מצב התהליך כדי לראות פרטים על ההתקדמות של המשימה השלמה. לאחר בחירה באפשרות **ראה פרטים** עבור אחת מהמשימות תמצא מידע נוסף: זמן העיבוד, תאריך העיבוד האחרון וכל השגיאות והאזהרות הקשורות למשימה.

## <a name="deduplication-output-as-an-entity"></a>פלט ביטול כפילויות כישות
בנוסף לישות הראשית המאוחדת שנוצרה כחלק מההתאמה חוצת הישויות, תהליך ביטול הכפילויות יוצר גם ישות חדשה עבור כל ישות מסדר ההתאמה כדי לזהות את הרשומות שהכפילויות שלהן בוטלו. ניתן למצוא ישויות אלה ביחד עם **ConflationMatchPairs:CustomerInsights** במקטע **מערכת** בדף **ישויות** בשם **Deduplication_Datasource_Entity**.

ישות של פלט ביטול כפילויות מכילה את המידע הבא:
- מזהים / מפתחות
  - שדה המפתח הראשי ושדה המזהים החלופיים שלו. שדה מזהים חלופיים מורכב מכל המזהים החלופיים שזוהו עבור רשומה.
  - השדה Deduplication_GroupId מציג את הקבוצה או האשכול המזוהים בתוך ישות המקבצת את כל הרשומות הדומות בהתבסס על שדות ביטול הכפילויות שצוינו. הוא משמש למטרות עיבוד מערכת. אם לא צוינו כללי ביטול כפילויות ידניים וכללי ביטול כפילויות שהוגדרו על-ידי המערכת חלים, ייתכן שלא תמצא שדה זה בישות פלט ביטול הכפילויות.
  - Deduplication_WinnerId: שדה זה מכיל את המזהה המנצח מהקבוצות או האשכולות שזוהו. אם Deduplication_WinnerId זהה לערך המפתח הראשי עבור רשומה, המשמעות היא שהרשומה היא הרשומה המנצחת.
- שדות המשמשים להגדרה של כללי ביטול הכפילויות.
- השדות 'כלל' ו'ניקוד' כדי לציין אילו כללי ביטול כפילויות הוחלו והניקוד הוחזר על-ידי אלגוריתם ההתאמה.

## <a name="review-and-validate-your-matches"></a>בדוק ואמת את ההתאמות שלך

בצע הערכה של איכות זוגות ההתאמה:

- בדף **התאמה**, תמצא שני אריחים המציגים תובנות ראשוניות לגבי הנתונים.

  - **לקוחות ייחודיים**: מציג את מספר הפרופילים הייחודיים שהמערכת זיהתה.
  - **רשומות תואמות**: מציג את מספר ההתאמות בכל צמדי ההתאמה.

- בטבלה **סדר התאמה**, באפשרותך להעריך את התוצאות של כל זוג-התאמה על ידי השוואה בין מספר הרשומות שהגיעו מישות זוג-התאמה זה לעומת אחוז הרשומות שהותאמו בהצלחה.

- במקטע **כללים** של ישות בטבלה **סדר התאמה**, תוכל למצוא את אחוז הרשומות שהותאמו בהצלחה ברמת הכלל. על ידי בחירת סמל הטבלה לצד כלל, תוכל להציג את כל הרשומות הללו ברמת הכלל. אנו ממליצים לבדוק קבוצת משנה של הרשומות כדי לאמת שהם הותאמו נכון.

- נסה ספי דיוק שונים עם התנאים שהגדרת כדי לזהות את הערך האופטימלי.

  1. בחר בשלוש הנקודות (...) עבור כלל זוג ההתאמה שאתה רוצה לשחק איתו ובחר **ערוך**.

  2. בחר את התנאי שברצונך לבדוק. כל קריטריון מיוצג על ידי שורה אחת בחלונית **כלל התאמה**.

  3. מה שתראה בדף **תצוגה מקדימה של קריטריונים** תלוי ברמת הדיוק שבחרת לתנאי. מצא את מספר הרשומות המותאמות ואלה שלא הותאמו עבור התנאי שנבחר.

     הבן טוב יותר את ההשפעות של רמות סף שונות. אתה יכול להשוות כמה רשומות יותאמו בכל אחת מרמות הסף, ולהציג את הרשומות שבכל אפשרות. בחר כל אחד מהאריחים ובדוק את הנתונים במקטע הטבלה.

## <a name="optimize-your-matches"></a>מטב את ההתאמות

שפר את האיכות על ידי הגדרה מחדש של כמה מפרמטרי ההתאמה:

- **שנה את סדר ההתאמה** על ידי בחירה באפשרות **ערוך** ושנה את שדות סדר ההתאמה.

  > [!div class="mx-imgBorder"]
  > ![עריכת סדר התאמת הנתונים](media/configure-data-match-order-edit.png "עריכת סדר התאמת הנתונים")

- **שנה את סדר הכללים** אם הגדרת מספר כללים. באפשרותך לסדר מחדש את כללי ההתאמה על ידי בחירה באפשרויות **הזז למעלה** או **הזז למטה** ברשת כללי ההתאמה.

  > [!div class="mx-imgBorder"]
  > ![שנה את סדר הכללים](media/configure-data-change-rule-order.png "שנה את סדר הכללים")

- **שכפל את הכללים** אם הגדרת כלל התאמה וברצונך ליצור כלל דומה עם שינויים. עשה זאת על ידי בחירה באפשרות **שכפל‬**.

  > [!div class="mx-imgBorder"]
  > ![שכפל כלל](media/configure-data-duplicate-rule.png "שכפל כלל")

- **בטל כלל** כדי לשמור כלל התאמה תוך כדי אי הכללה שלו בתהליך ההתאמה.

  > [!div class="mx-imgBorder"]
  > ![בטל כלל](media/configure-data-deactivate-rule.png "בטל כלל")

- **ערוך את הכללים** על ידי בחירה בסמל **ערוך**. באפשרותך לבצע את השינויים הבאים:

  - שינוי תכונות עבור תנאי: בחר תכונות חדשות בשורת התנאים הספציפית.
  - שנה את סף התנאי: התאם את מחוון הדיוק.
  - שנה את שיטת הנרמול של תנאי: עדכן את שיטת הנרמול.

## <a name="specify-your-custom-match-records"></a>ציין את רשומות ההתאמה המותאמות אישית

ניתן לציין תנאים שרשומות מסוימות צריכות להתאים להם תמיד או אף פעם. ניתן להעלות כללים אלה ביחד לתהליך ההתאמה.

1. בחר באפשרות **התאמה אישית** במסך **סדר התאמה**.

   > [!div class="mx-imgBorder"]
   > ![יצירת התאמה מותאמת אישית](media/custom-match-create.png "יצירת התאמה מותאמת אישית")

2. אם אין לך ישויות שהועלו, תראה תיבת דו-שיח חדשה של **התאמה אישית** המחייבת אותך למלא כמה פרטים. אם סיפקת את הפרטים האלה קודם לכן, דלג לשלב 8.

   > [!div class="mx-imgBorder"]
   > ![תיבת דו-שיח חדשה של התאמה אישית](media/custom-match-new-dialog-box.png "תיבת דו-שיח חדשה של התאמה אישית")

3. בחר **מלא את התבנית** כדי לקבל קובץ תבנית שיכול לציין אילו רשומות מאילו ישויות תמיד צריכות להתאים או לעולם לא להתאים. יהיה עליך למלא בנפרד את הרשומות "תמיד להתאים" ו"אף פעם לא להתאים" בשני קבצים שונים.

4. התבנית מכילה שדות לציון הישות וערכי המפתח העיקריים של הישות שישמשו בהתאמה המותאמת אישית. לדוגמה, אם ברצונך שמפתח ראשי 12345 מישות מכירות יתאים תמיד למפתח הראשי 34567 מישות אנשי קשר, תצטרך לציין:
    - ישות 1: מכירות
    - מפתח ישות 1: 12345
    - ישות 2: איש קשר
    - מפתח ישות 2: 34567

   אותו קובץ תבנית יכול לציין רשומות התאמה בהתאמה אישית מישויות מרובות.
   
   אם ברצונך לציין התאמה מותאמת אישית עבור ביטול כפילויות בישות, ספק את אותה ישות הן כ- Entity1 והן כ- Entity2 והגדר את ערכי המפתח הראשי השונים.

5. לאחר הוספת כל הדרישות שברצונך להחיל, שמור את קובץ התבנית.

6. עבור אל **נתונים** > **מקורות נתונים** וקלוט את קבצי התבנית כישויות חדשות. לאחר השילוב תוכל להשתמש בהם כדי לציין את תצורת ההתאמה.

7. לאחר העלאת הישויות והקבצים הזמינים, בחר שוב **התאמה אישית**. תראה אפשרויות לציון הישויות שתרצה לכלול. בחר את הישויות הרצויות מהתפריט הנפתח.

   > [!div class="mx-imgBorder"]
   > ![עקיפות התאמה מותאמת אישית](media/custom-match-overrides.png "עקיפות התאמה מותאמת אישית")

8. בחר את הישויות שבהן תרצה להשתמש עבור **תמיד התאם** או **לעולם אל תתאים**, בחר **בוצע**.

9. בחר **שמור** בדף **התאמה** עבור תצורת ההתאמה האישית שהגדרת זה עתה.

10. בחר **הפעל** בדף **התאמה** כדי להתחיל בתהליך ההתאמה, ותצורת ההתאמה המותאמת אישית תיכנס לתוקף. הגדרת התצורה מקבלת עדיפות על פני כל כללי ההתאמה של המערכת.

11. לאחר השלמת ההתאמה, תוכל לאמת את הישות **ConflationMatchPair** כדי לאשר שההחלפות מיושמות בהתאמות ההתנגשויות.

## <a name="next-step"></a>השלב הבא

לאחר השלמת תהליך ההתאמה עבור זוג התאמה אחד לפחות, אתה יכול לפתור סתירות אפשריות בנתונים על ידי מעבר על הנושא [**מיזוג**](merge-entities.md).


[!INCLUDE[footer-include](../includes/footer-banner.md)]