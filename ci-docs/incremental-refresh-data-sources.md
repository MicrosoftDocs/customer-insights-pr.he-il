---
title: רענון מצטבר עבור מקורות נתונים של Power Query ו- Azure Data Lake
description: רענן נתונים חדשים ומעודכנים עבור מקורות נתונים גדולים שמבוססים על מקורות נתונים של Power Query או של Azure data lake.
ms.date: 05/30/2022
ms.reviewer: v-wendysmith
ms.subservice: audience-insights
ms.topic: how-to
author: mukeshpo
ms.author: mukeshpo
manager: shellyha
searchScope:
- ci-system-schedule
- customerInsights
ms.openlocfilehash: de39743eb8728fac34e417724c5f73bf44309c89
ms.sourcegitcommit: 5807b7d8c822925b727b099713a74ce2cb7897ba
ms.translationtype: HT
ms.contentlocale: he-IL
ms.lasthandoff: 07/28/2022
ms.locfileid: "9207138"
---
# <a name="incremental-refresh-for-power-query-and-azure-data-lake-data-sources"></a>רענון מצטבר עבור מקורות נתונים של Power Query ו- Azure Data Lake

רענון מצטבר למקורות נתונים בהתבסס על Power Query או Azure Data Lake מספק את היתרונות הבאים:

- **רענון מהר יותר** - רק הנתונים שהשתנו מתרעננים. לדוגמה, תוכל לרענן רק את חמשת הימים האחרונים של ערכת נתונים היסטוריים.
- **אמינות מוגברת** - ברענון קטן יותר, אינך צריך לשמור על חיבורים למערכות מקור רגישות למשך זמן רב, מה שמקטין את הסיכון לבעיות בחיבור.
- **צריכת משאבים מופחתת** - רענון של קבוצת משנה בלבד מכלל הנתונים מביא לשימוש יעיל יותר במשאבי המחשוב ומוריד את טביעת הרגל הסביבתית.

## <a name="configure-incremental-refresh-for-data-sources-based-on-power-query"></a>הגדרת רענון מצטבר עבור מקורות נתונים מבוססי Power Query

Customer Insights מאפשרות רענון מצטבר עבור מקורות נתונים המיובאים דרך Power Query התומכים בקליטה מצטברת. לדוגמה, מסדי נתונים של Azure SQL עם שדות תאריך ושעה, המציינים מתי עודכנו רשומות הנתונים לאחרונה.

1. [צור מקור נתונים חדש מבוסס על Power Query](connect-power-query.md).

1. בחר מקור נתונים התומך ברענון מצטבר, כגון [מסד נתונים של Azure SQL](/power-query/connectors/azuresqldatabase).

1. בחר את הישויות או הטבלאות שיש לעבד.

1. השלם את שלבי השינוי ובחר **הבא**.

1. בתיבת הדו-שיח **הגדר רענון מצטבר**, בחר **הגדר** כדי לפתוח את **הגדרות רענון מצטברות**. אם תבחר **דלג**, מקור נתונים ירענן את כל ערכת הנתונים.
   > [!TIP]
   > ניתן גם להחיל רענון מצטבר מאוחר יותר על ידי עריכת מקור נתונים קיים.

1. באפשרות **הגדרות רענון מצטבר**, הגדר את הרענון המצטבר עבור כל הישויות שבחרת בעת יצירת מקור הנתונים.

   :::image type="content" source="media/incremental-refresh-settings.png" alt-text="קביעת התצורה של הגדרות רענון מצטבר.":::

1. בחר ישות וספק את הפרטים הבאים:

   - **הגדר את המפתח הראשי**: בחר מפתח ראשי עבור הישות או הטבלה.
   - **הגדר את השדה "עודכן לאחרונה"**: שדה זה יציג רק תכונות מסוג תאריך ושעה. בחר תכונה שמציינת מתי עודכנו הרשומות לאחרונה. היא תשמש לזיהוי הרשומות שנמצאות במסגרת הזמן של הרענון המצטבר.
   - **בדוק אם קיימים עדכונים כל** : ציין בכל כמה זמן תרצה שהרענון המצטבר יבוצע.

1. בחר **שמור** כדי להשלים את יצירת מקור הנתונים. רענון הנתונים הראשוני יהיה רענון מלא. לאחר מכן, רענון הנתונים המצטבר מתרחש כפי שהוגדר בשלב הקודם.

## <a name="configure-incremental-refresh-for-azure-data-lake-data-sources"></a>הגדרת רענון מצטבר עבור מקורות נתונים של Azure Data Lake

Customer Insights מאפשר רענון מצטבר עבור מקורות נתונים המחוברים אל Azure Data Lake Storage. כדי להשתמש בעיבוד ורענון מצטבר עבור ישות, הגדר ישות זו בעת הוספת מקורה נתונים של Azure Data Lake או מאוחר יותר בעת עריכת מקור הנתונים. תיקיית נתוני הישות חייבת להכיל את התיקיות הבאות:

- התיקיה **FullData**: צריכה לכלול קבצי נתונים המכילים רשומות ראשוניות
- **IncrementalData**: תיקיה עם תיקיות בהיררכיה של תאריך/שעה בפורמט **ששש/חח/יי/שש** המכילה את העדכונים המצטברים. **שש** מייצג את שעת ה-UTC של העדכונים ומכיל את התיקיות **מצבי Upsert** ו **מחיקה**. **מצבי Upserts** מכיל קבצי נתונים עם עדכונים לרשומות קיימות או לרשומות חדשות. **מחיקות** מכיל קבצי נתונים עם רשומות להסרה.

1. בעת הוספה או עריכה של מקור נתונים, נווט אל החלונית **תכונות** של הישות.

1. סקור את התכונות. ודא שתכונה נצורה או תאריך עדכון אחרון מוגדר ב **פורמט נתונים** *תאריך ושעה* וכן **סוג סמנטי** של *תאירך.לוח שנה*. ערוך את התכונה במידת הצורך ובחר **סיום**.

1. בחלונית **בחירת ישויות**, ערוך את הישות. תיבת הסימון **עיבוד מצטבר** נבחרת.

   :::image type="content" source="media/ADLS_inc_refresh.png" alt-text="הגדר ישויות במקור הנתונים לצורך רענון מצטבר.":::

   1. דפדף אל תיקיית הבסיס המכילה את קבצי ה- csv‏.‎‏ או ‏parquet‏. לקבלת נתונים מלאים, מצבי Upserts מצטברים של נתונים ומחיקות נתונים מצטברות.
   1. הזן את הסיומת עבור הנתונים המלאים ושני הקבצים המצטברים (\. csv או \. פַּרקֶט).
   1. עבור קבצי ‎.csv, בחר את מפריד העמודות ואם אתה רוצה שהשורה הראשונה של הקובץ תהיה כותרת עמודה.
   1. בחר **Save**.

1. עבור **עדכון אחרון**, בחר את התכונת חותמת הזמן של התאריך.

1. אם ה **מפתח ראשי** לא נבחר, בחר את המפתח הראשי. המפתח הראשי הוא תכונה ייחודית לישות. כדי שתכונה תהיה מפתח ראשי חוקי, היא לא יכולה לכלול ערכים כפולים, ערכים חסרים או ערכי null. התכונות של סוגי הנתונים 'מחרוזות', 'מספר שלם' ו-'GUID' נתמכות כמפתחות ראשיים.

1. בחר **סגור** כדי לשמור ולסגור את החלונית.

1. המשך בהוספה או עריכה של מקור נתונים.

[!INCLUDE [footer-include](includes/footer-banner.md)]
